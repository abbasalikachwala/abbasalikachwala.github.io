/* =========================================================
   Daily Macros Tracker â€” Apple-style UI
   - Light/Dark via prefers-color-scheme
   - System font stack (San Francisco where available)
   ========================================================= */

:root{
  --bg: #f5f5f7;
  --panel: #ffffff;
  --border: #e5e5ea;
  --text: #111111;
  --muted: #6e6e73;
  --accent: #0a84ff;   /* iOS system blue */
  --danger: #ff3b30;   /* iOS system red */
  --ok: #32d74b;
  --radius: 14px;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 6px 24px rgba(0,0,0,.06);
  --gap: 16px;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #0c0c0e;
    --panel: #1c1c1e;
    --border: #2c2c2e;
    --text: #f5f5f7;
    --muted: #8e8e93;
    --accent: #0a84ff;
    --danger: #ff453a;
    --shadow: 0 1px 2px rgba(0,0,0,.4), 0 6px 24px rgba(0,0,0,.36);
  }
}

/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { color-scheme: light dark; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

/* Topbar */
.topbar{
  position: sticky; top:0; z-index: 100;
  display:flex; align-items:center; justify-content: space-between;
  padding: 10px 16px; backdrop-filter: blur(10px);
  background: color-mix(in oklab, var(--bg) 80%, transparent);
  border-bottom: 1px solid var(--border);
}
.brand{ font-weight: 700; letter-spacing:.2px; font-size: 18px; }

/* Segmented control (top and inline) */
.seg{ display:inline-flex; gap:0; border:1px solid var(--border); border-radius: 999px; padding:2px; }
.seg.seg-small{ transform: scale(.92); transform-origin: left center; }
.seg-btn{
  appearance:none; background:transparent; border:0; padding:8px 14px; cursor:pointer;
  border-radius:999px; color:var(--text); font-weight:600; transition: background .15s ease;
}
.seg-btn:hover{ background: color-mix(in oklab, var(--panel) 85%, var(--bg)); }
.seg-btn.is-active{ background: var(--accent); color: #fff; }

/* Right side of topbar */
.nav-rt{ display:flex; gap:10px; align-items:center; }
input[type="date"]{
  appearance:none; border:1px solid var(--border); background:var(--panel); color:var(--text);
  border-radius: 10px; padding:8px 10px;
}

/* Container & cards */
.container{ width:100%; max-width: 1040px; margin: 16px auto; padding: 0 16px; display:grid; gap:16px; }
.card{
  background: var(--panel); border:1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); padding: 16px;
}
.hero{ padding: 18px 18px; }
.hero-row{ display:grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
.hero-col{ display:flex; flex-direction:column; gap:8px; }
.eyebrow{ font-size: 12px; color: var(--muted); letter-spacing:.3px; }
.hero-num{ font-weight: 800; font-size: clamp(20px, 5vw, 28px); }

/* Buttons */
.btn{
  appearance:none; border:1px solid transparent; background: var(--accent); color:#fff;
  padding:10px 14px; border-radius: 12px; font-weight:700; cursor:pointer;
  transition: transform .06s ease, background .2s ease, border-color .2s ease, color .2s ease;
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }
.btn.ghost{ background: transparent; color: var(--text); border-color: var(--border); }
.btn.danger{ background: var(--danger); border-color: color-mix(in oklab, var(--danger) 80%, black 5%); }
.btn.ghost.danger{ color: var(--danger); border-color: color-mix(in oklab, var(--danger) 40%, var(--border)); }
.btn.tiny{ padding:8px 10px; font-size: 12.5px; border-radius:10px; }

/* Headings / helpers */
.title{ margin:0 0 6px 0; font-size: 18px; font-weight: 700; }
.section-head{ display:flex; align-items: end; justify-content: space-between; gap: 10px; }
.muted{ color: var(--muted); }
.sm{ font-size: 12px; }
.mt8{ margin-top: 8px; }

/* Inputs */
input, select, button{
  font: inherit;
}
input[type="number"], select, input[type="text"]{
  width: 100%; padding: 10px 12px; border-radius: 12px;
  border:1px solid var(--border); background: var(--panel); color: var(--text);
  transition: border-color .15s ease, background .2s ease;
}
input::placeholder{ color: color-mix(in oklab, var(--muted) 70%, transparent); }
input:focus, select:focus{ outline: 2px solid color-mix(in oklab, var(--accent) 35%, transparent); outline-offset: 1px; }

/* Inline input with unit */
.inline{ display:flex; align-items:center; gap:8px; }
.inline .unit{ color: var(--muted); font-weight:600; }
.grid-2{ display:grid; grid-template-columns: repeat(2, 1fr); gap: var(--gap); }
.grid-2.mini{ gap: 10px; }
.grid-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap: var(--gap); }
.grid-4{ display:grid; grid-template-columns: repeat(4, 1fr); gap: var(--gap); }

@media (max-width: 980px){
  .hero-row, .grid-4{ grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px){
  .hero-row, .grid-4, .grid-3, .grid-2{ grid-template-columns: 1fr; }
}

/* Tiles (Quick toggles) */
.tiles{ display:grid; grid-template-columns: repeat(2, 1fr); gap: 14px; }
@media (max-width: 680px){ .tiles{ grid-template-columns: 1fr; } }
.tile{
  border:1px solid var(--border); border-radius: 16px; padding: 14px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 96%, transparent), var(--panel));
  box-shadow: var(--shadow);
  display:flex; flex-direction: column; gap:10px;
}

/* Switch label */
.switch{ display:flex; align-items:center; gap:8px; font-weight:700; }

/* Timeline styling (Breakfast pre/post) */
.timeline{ position: relative; padding-left: 22px; display:grid; gap: 18px; }
.timeline::before{
  content:""; position:absolute; left:10px; top: 6px; bottom: 6px; width:2px; background: var(--border);
}
.t-dot{
  position:absolute; left:4px; width:12px; height:12px; border-radius:50%;
  background: var(--accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 20%, transparent);
}
.t-row{ position: relative; padding-left: 8px; }
.t-head{ font-weight: 700; margin-bottom: 8px; }

/* Tables */
.table{ width:100%; border-collapse: collapse; }
.table th, .table td{
  padding: 10px 8px; border-bottom: 1px solid var(--border);
}
.table th{ text-align:left; font-weight:700; font-size: 13.5px; color: var(--muted); letter-spacing:.2px; }
.table td{ font-weight:600; }
.table th.r, .table td.r{ text-align:right; }

/* Group totals */
.group-grid{ display:grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
.subcard{
  background: var(--panel); border:1px dashed var(--border); border-radius: 14px; padding: 12px;
}
@media (max-width: 680px){ .group-grid{ grid-template-columns: 1fr; } }

/* Actions row */
.actions .actions-row{ display:flex; flex-wrap:wrap; gap:10px; }

/* Progress bar (protein) */
progress{ width:100%; height: 12px; border:0; background: transparent; }
progress::-webkit-progress-bar{ background: color-mix(in oklab, var(--panel) 70%, var(--bg)); border-radius: 999px; }
progress::-webkit-progress-value{ background: var(--ok); border-radius: 999px; }
progress::-moz-progress-bar{ background: var(--ok); border-radius: 999px; }

/* Dialog (Settings) */
.dialog{
  width: min(1000px, 96vw); border:1px solid var(--border); border-radius: 18px;
  background: var(--panel); color: var(--text); box-shadow: var(--shadow); padding:0;
}
.dialog::backdrop{ background: color-mix(in oklab, #000 50%, transparent); backdrop-filter: blur(2px); }
.dialog .dialog-head{
  display:flex; align-items:center; justify-content: space-between;
  padding: 14px 16px; border-bottom:1px solid var(--border);
}
.settings-grid{
  display:grid; grid-template-columns: repeat(2, 1fr); gap: 14px; padding: 16px;
}
@media (max-width: 860px){ .settings-grid{ grid-template-columns: 1fr; } }
.set-block{
  border:1px solid var(--border); border-radius: 14px; padding: 14px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 96%, transparent), var(--panel));
}
.set-block h4{ margin:0 0 10px 0; font-size: 15px; }
.set-block h5{ margin: 6px 0 8px 0; font-size: 13px; color: var(--muted); }

/* File input (import presets) */
label.file{
  display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px;
  border:1px dashed var(--border); cursor:pointer; user-select:none;
}
label.file input{ display:none; }
label.file span{ font-weight:700; }

/* Accessibility helpers */
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); border:0;
}

/* Focus rings for buttons */
button:focus-visible, .btn:focus-visible, .seg-btn:focus-visible, input:focus-visible, select:focus-visible{
  outline: 2px solid color-mix(in oklab, var(--accent) 60%, transparent);
  outline-offset: 2px;
}
